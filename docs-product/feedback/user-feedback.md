---
title: User Feedback System
category: product-design
created: 2026-01-21
author: steve-jobs
version: 1.0
phase: 1
priority: P0
status: pending-development
---

# Feature: User Feedback System - 用户反馈系统

> **功能模块**: 运营支撑 | **优先级**: P0 | **排期**: Phase 1 | **状态**: 待开发

---

## 一、功能概述

### 1.1 功能描述

用户反馈系统为用户提供举报错误信息、反馈问题和建议的渠道，帮助平台持续优化数据质量和用户体验。

### 1.2 核心价值

- **质量众包**: 利用用户力量发现数据问题
- **快速响应**: 及时处理用户反馈，优化体验
- **信任建设**: 展示平台对质量的重视
- **数据优化**: 收集反馈，改进数据质量

### 1.3 用户故事

```
作为 家长
我希望 举报过期的课程信息
以便 帮助平台清理无效信息

作为 用户
我希望 反馈课程信息错误
以便 提醒教师/机构更正

作为 平台运营
我希望 及时收到用户反馈
以便 快速处理问题
```

---

## 二、功能详细设计

### 2.1 反馈类型

| 反馈类型 | 说明 | 示例 |
|----------|------|------|
| **信息过期** | 课程信息已过期 | 课程已停止招生 |
| **信息错误** | 课程信息不准确 | 价格/时间/地点错误 |
| **虚假信息** | 课程信息可能是虚假 | 夸大宣传、诈骗 |
| **联系方式无效** | 无法联系到教师 | 电话空号/微信不存在 |
| **内容不当** | 课程内容违规 | 违法内容、抄袭 |
| **其他问题** | 其他反馈类型 | 建议、意见 |

### 2.2 反馈流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                        用户反馈流程                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  用户在课程页点击"反馈"                                             │
│           │                                                        │
│           ▼                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  选择反馈类型                                                  │   │
│  │  ┌─────────────────────────────────────────────────────┐     │   │
│  │  │ [☐ 信息过期]  [☐ 信息错误]  [☐ 虚假信息]          │     │   │
│  │  │ [☐ 联系方式无效] [☐ 内容不当] [☐ 其他问题]         │     │   │
│  │  └─────────────────────────────────────────────────────┘     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│           │                                                        │
│           ▼                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  填写反馈详情（可选）                                          │   │
│  │  ┌─────────────────────────────────────────────────────┐     │   │
│  │  │ [                                         ]        │     │   │
│  │  │ [           请详细描述问题...                       │     │   │
│  │  │ [                                         ]        │     │   │
│  │  └─────────────────────────────────────────────────────┘     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│           │                                                        │
│           ▼                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  提交反馈                                                     │   │
│  │  ┌─────────────────────────────────────────────────────┐     │   │
│  │  │ [              提 交 反 馈                    ]    │     │   │
│  │  └─────────────────────────────────────────────────────┘     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│           │                                                        │
│           ▼                                                        │
│  反馈成功提示                                                      │
│           │                                                        │
│           ▼                                                        │
│  后台处理                                                          │
│           │                                                        │
│           ├── 有效反馈 ──▶ 更新课程/通知发布者                     │
│           └── 无效反馈 ──▶ 关闭反馈                               │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.3 反馈处理流程

```
收到新反馈
      │
      ▼
自动分类（根据反馈类型）
      │
      ▼
优先级评估（根据反馈类型和用户信誉）
      │
      ├── 高优先级 ──▶ 24小时内处理
      ├── 中优先级 ──▶ 72小时内处理
      └── 低优先级 ──▶ 周常处理
      │
      ▼
人工审核
      │
      ├── 有效 ──▶ 执行相应操作（更新/下架/通知）
      ├── 无效 ──▶ 关闭反馈，标记用户
      └── 待补充 ──▶ 联系用户补充信息
      │
      ▼
反馈处理完成，通知用户
```

---

## 三、数据模型设计

### 3.1 反馈表

```sql
CREATE TABLE feedback (
    id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    
    -- 关联信息
    course_id       UUID NOT NULL REFERENCES courses(id),
    user_id         UUID REFERENCES users(id),  -- 匿名反馈为NULL
    
    -- 反馈内容
    feedback_type   VARCHAR(50) NOT NULL,  -- expired, incorrect, fake, invalid_contact, inappropriate, other
    description     TEXT,
    screenshot_urls TEXT[],  -- 截图URL数组
    
    -- 状态
    status          VARCHAR(20) DEFAULT 'pending',  -- pending, reviewing, resolved, closed
    priority        VARCHAR(20) DEFAULT 'normal',  -- low, normal, high, urgent
    
    -- 处理信息
    assigned_to     UUID REFERENCES admin_users(id),
    resolved_at     TIMESTAMP,
    resolution      VARCHAR(50),  -- updated, removed, no_action
    resolution_note TEXT,
    
    -- 信誉评分
    reporter_score  INTEGER,  -- 反馈用户的历史准确率
    
    -- 元数据
    ip_address      VARCHAR(45),
    user_agent      TEXT,
    created_at      TIMESTAMP DEFAULT NOW(),
    updated_at      TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_feedback_course ON feedback(course_id);
CREATE INDEX idx_feedback_status ON feedback(status);
CREATE INDEX idx_feedback_type ON feedback(feedback_type);
CREATE INDEX idx_feedback_created ON feedback(created_at);
```

### 3.2 反馈处理动作表

```sql
CREATE TABLE feedback_actions (
    id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    feedback_id     UUID NOT NULL REFERENCES feedback(id),
    admin_id        UUID NOT NULL REFERENCES admin_users(id),
    
    action_type     VARCHAR(50) NOT NULL,  -- assign, review, update_course, remove_course, close
    action_note     TEXT,
    
    created_at      TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_feedback_actions_feedback ON feedback_actions(feedback_id);
```

---

## 四、反馈处理规则

### 4.1 优先级规则

| 反馈类型 | 默认优先级 | 升级条件 |
|----------|------------|----------|
| 虚假信息 | 高 | 多人举报 |
| 违法内容 | 紧急 | - |
| 联系方式无效 | 中 | - |
| 信息过期 | 低 | 多人举报 |
| 信息错误 | 低 | - |
| 其他 | 低 | - |

### 4.2 处理时效

| 优先级 | 处理时限 |
|--------|----------|
| 紧急 | 4小时内 |
| 高 | 24小时内 |
| 中 | 72小时内 |
| 低 | 7天内 |

### 4.3 反馈有效性评估

| 指标 | 说明 |
|------|------|
| 准确率 | 反馈被确认有效的比例 |
| 响应率 | 用户对处理结果的响应率 |
| 重复率 | 重复反馈的比例 |

---

## 五、API 设计

### 5.1 API 列表

| 方法 | 路径 | 功能 | 说明 |
|------|------|------|------|
| POST | /api/v1/courses/:id/feedback | 提交反馈 | 用户提交反馈 |
| GET | /api/v1/courses/:id/feedback | 获取反馈列表 | 获取课程的反馈 |
| GET | /api/v1/admin/feedback | 获取所有反馈 | 管理后台使用 |
| PUT | /api/v1/admin/feedback/:id | 更新反馈状态 | 处理反馈 |
| POST | /api/v1/admin/feedback/:id/resolve | 解决反馈 | 完成处理 |

### 5.2 API 详细设计

#### 5.2.1 POST /api/v1/courses/:id/feedback

**请求示例**:

```json
{
  "feedbackType": "expired",
  "description": "这门课程已经在2025年12月停止了",
  "screenshotUrls": ["https://example.com/screenshot1.jpg"]
}
```

**响应示例** (201):

```json
{
  "success": true,
  "message": "感谢您的反馈！我们会尽快处理。",
  "data": {
    "feedbackId": "fb-001",
    "estimatedTime": "24小时内"
  }
}
```

---

## 六、前端设计

### 6.1 反馈入口

```
┌─────────────────────────────────────────────────────────────────────┐
│  课程详情页底部                                                     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  💬 有问题？ [举报信息错误或过时]                           │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 6.2 反馈表单

```
┌─────────────────────────────────────────────────────────────────────┐
│  举报/反馈                                                         │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  * 选择反馈类型                                                    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [☐] 信息过期 - 课程已停止或时间已过                        │   │
│  │ [☐] 信息错误 - 价格/时间/地点等信息不准确                  │   │
│  │ [☐] 虚假信息 - 可能是虚假或欺诈信息                        │   │
│  │ [☐] 联系方式无效 - 电话空号/微信不存在                     │   │
│  │ [☐] 内容不当 - 违规内容或抄袭                              │   │
│  │ [☐] 其他问题                                                │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  详细描述（可选）                                                   │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [                                                 ]        │   │
│  │ [           请详细描述问题，帮助我们更快处理...            │   │
│  │ [                                                 ]        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  上传截图（可选）                                                   │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [ 📷 点击上传截图 ]                                         │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [                   提 交 反 馈                        ]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  [×] 关闭                                                          │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 七、测试用例

### 7.1 功能测试用例

| 测试场景 | 操作步骤 | 预期结果 |
|----------|----------|----------|
| 提交反馈 | 选择类型并提交 | 反馈创建成功 |
| 匿名反馈 | 未登录时提交 | 反馈创建成功 |
| 登录反馈 | 登录后提交 | 反馈关联用户 |
| 查看反馈 | 管理员查看反馈 | 列表正确显示 |
| 处理反馈 | 管理员处理反馈 | 状态更新 |

---

## 八、实现计划

### 8.1 开发任务分解

| 任务 | 描述 | 预估工时 | 依赖 |
|------|------|----------|------|
| 数据库设计 | 创建feedback表 | 4h | - |
| 反馈提交API | 实现反馈提交接口 | 8h | 数据库 |
| 反馈列表API | 实现反馈列表接口 | 4h | 数据库 |
| 反馈处理API | 实现反馈处理接口 | 8h | 数据库 |
| 反馈前端 | 实现反馈表单 | 8h | UI设计 |
| 管理后台 | 实现反馈管理界面 | 12h | API设计 |
| 通知服务 | 反馈处理通知 | 4h | 反馈API |
| 单元测试 | 反馈功能测试 | 4h | 全部 |

### 8.2 验收标准

- [ ] 用户可提交反馈
- [ ] 匿名反馈可用
- [ ] 管理员可处理反馈
- [ ] 反馈状态正确流转
- [ ] 处理结果通知用户
- [ ] 管理界面功能完整

---

## 九、风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| 恶意举报 | 中 | 中 | 限制频率，信誉评分 |
| 举报过多 | 低 | 低 | 优先级排序 |
| 处理延迟 | 中 | 中 | SLA监控 |

---

**文档路径**: `/Users/dianwenwang/Project/idea/05-product-design/feature-feedback.md`

**相关文档**:
- [功能概览](feature-overview.md)
- [数据质量控制](feature-data-quality.md)
- [课程详情页](feature-course-detail.md)
