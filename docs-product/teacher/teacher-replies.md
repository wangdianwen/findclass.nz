---
title: Teacher Review Replies
category: product-design
created: 2026-01-21
author: steve-jobs
version: 1.0
phase: 2
priority: P1
status: pending-development
---

# Feature: Teacher Review Replies - 评价回复功能

> **功能模块**: 教师系统 | **优先级**: P1 | **排期**: Phase 2 | **状态**: 待开发

---

## 一、功能概述

### 1.1 功能描述

评价回复功能允许教师对用户评价进行回复，实现评价-回复的双向沟通，增强用户信任和教师形象管理。

### 1.2 核心价值

- **互动沟通**: 教师可直接回应用户反馈
- **形象管理**: 展示教师的负责态度
- **问题解决**: 通过回复解决用户疑虑
- **信任建设**: 公开透明的双向沟通

### 1.3 用户故事

```
作为 教师
我希望 回复家长的评价
以便 感谢认可或解释误会

作为 家长
我希望 看到教师的回复
以便 了解教师的回应态度
```

---

## 二、功能设计

### 2.1 回复规则

| 规则 | 说明 |
|------|------|
| 回复资格 | 仅被评价的教师可回复 |
| 回复时限 | 评价发布后30天内可回复 |
| 回复次数 | 每条评价仅可回复一次 |
| 字数限制 | 回复内容限制500字以内 |
| 修改限制 | 回复发布后不可修改 |

### 2.2 回复展示

| 场景 | 是否展示 |
|------|----------|
| 评价正常展示 | 回复正常展示 |
| 评价被隐藏 | 回复同时隐藏 |
| 评价被删除 | 回复同时删除 |

---

## 三、数据模型设计

### 3.1 评价回复表

```sql
CREATE TABLE review_replies (
    id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    
    -- 关联
    review_id       UUID NOT NULL REFERENCES reviews(id),
    teacher_id      UUID NOT NULL REFERENCES teachers(id),
    
    -- 回复内容
    content         TEXT NOT NULL,
    
    -- 状态
    is_public       BOOLEAN DEFAULT TRUE,
    
    -- 审核（可选）
    reviewed        BOOLEAN DEFAULT FALSE,
    reviewed_at     TIMESTAMP,
    reviewer_id     UUID REFERENCES admin_users(id),
    
    -- 时间戳
    created_at      TIMESTAMP DEFAULT NOW(),
    updated_at      TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_review_replies_review ON review_replies(review_id);
CREATE INDEX idx_review_replies_teacher ON review_replies(teacher_id);
```

---

## 四、API 设计

### 4.1 API 列表

| 方法 | 路径 | 功能 | 说明 |
|------|------|------|------|
| GET | /api/v1/reviews/:id/reply | 获取回复 | 查看评价的回复 |
| POST | /api/v1/reviews/:id/reply | 提交回复 | 教师回复评价 |

### 4.2 API 详细设计

#### 4.2.1 POST /api/v1/reviews/:id/reply

**请求示例**:

```json
{
  "content": "感谢李女士的认可！孩子的进步是对我最大的鼓励。期待继续陪伴孩子的学习之旅。"
}
```

**响应示例** (201):

```json
{
  "success": true,
  "message": "回复已发布",
  "data": {
    "replyId": "reply-001",
    "content": "感谢李女士的认可...",
    "createdAt": "2026-01-15T14:30:00Z"
  }
}
```

---

## 五、前端设计

### 5.1 评价详情页回复展示

```
┌─────────────────────────────────────────────────────────────────────┐
│  ⭐⭐⭐⭐⭐ 李女士                                             │
│  "非常推荐张老师！"                                                  │
│  ────────────────────────────────────────────────────────────────  │
│  老师讲解清晰，孩子成绩有明显提升。教学方法生动有趣，               │
│  孩子很喜欢上张老师的课。                                           │
│  ────────────────────────────────────────────────────────────────  │
│  1月10日 ·  👍 15人觉得有帮助                                      │
│                                                                     │
│  💬 张老师回复:                                                     │
│  ────────────────────────────────────────────────────────────────  │
│  "感谢李女士的认可！孩子的进步是对我最大的鼓励，期待继续           │
│   陪伴孩子的学习之旅。"                                             │
│  1月10日 14:00                                                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 5.2 教师回复表单

```
┌─────────────────────────────────────────────────────────────────────┐
│  回复评价                                                           │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  原文:                                                             │
│  ⭐⭐⭐⭐⭐ 李女士                                             │
│  "非常推荐张老师！"                                                  │
│                                                                     │
│  回复内容                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [                                                 ]        │   │
│  │ [           感谢家长的认可，我们会继续努力...              │   │
│  │ [                                                 ]        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  0/500 字                                                           │
│                                                                     │
│  [取消]  [发布回复]                                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 六、实现计划

### 6.1 开发任务分解

| 任务 | 描述 | 预估工时 | 依赖 |
|------|------|----------|------|
| 回复API | 实现回复提交接口 | 4h | 评价系统 |
| 回复前端 | 实现回复展示和表单 | 8h | API设计 |
| 单元测试 | 回复功能测试 | 4h | 全部 |

### 6.2 验收标准

- [ ] 教师可回复评价
- [ ] 回复正确展示
- [ ] 回复规则生效

---

## 七、风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| 不当回复 | 低 | 中 | 审核机制 |
| 回复超时 | 低 | 低 | 提醒通知 |

---

**文档路径**: `/Users/dianwenwang/Project/idea/05-product-design/feature-teacher-replies.md`

**相关文档**:
- [功能概览](feature-overview.md)
- [用户评价系统](feature-reviews.md)
