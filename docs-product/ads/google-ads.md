---
title: Google Ads Integration
category: product-design
created: 2026-01-21
author: steve-jobs
version: 1.0
phase: 1
priority: P1
---

# Feature: Google Ads Integration - Google广告集成

> **功能模块**: 收入系统 | **优先级**: P1 | **排期**: Phase 1 | **状态**: 新建

---

## 一、功能概述

### 1.1 功能描述

Google Ads集成是平台初期主要收入来源，通过在网站关键位置展示相关广告，获取广告收入。同时为机构客户提供精准的广告投放服务。

### 1.2 核心价值

- **广告收入**: 平台初期主要收入来源
- **精准投放**: 基于用户搜索行为展示相关广告
- **用户体验**: 广告与内容相关，不影响浏览体验
- **数据统计**: 完整的广告效果统计

### 1.3 用户故事

```
作为 平台运营
我希望 在网站展示Google广告
以便 获取广告收入，支持平台运营

作为 访问者
我希望 看到的广告与搜索内容相关
以便 发现更多有用的教育资源

作为 机构客户
我希望 在平台投放精准广告
以便 获得更多曝光和客户
```

---

## 二、广告类型设计

### 2.1 广告类型分类

| 广告类型 | 触发条件 | 展示位置 | 计费方式 | CPM/CPC |
|----------|----------|----------|----------|---------|
| **搜索广告** | 用户搜索关键词 | 搜索结果顶部 | CPC | $0.30-0.80 |
| **展示广告** | 浏览相关页面 | 侧边栏、底部 | CPM | $0.50-2.00 |
| **原生广告** | 相关内容匹配 | 文章/列表中 | CPC | $0.40-1.00 |
| **机构推广** | 机构付费推广 | 指定位置 | CPD | $5-20/天 |

### 2.2 广告位布局

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           网站广告位布局                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 📺 顶部通栏广告 (728x90)                                             │   │
│  │                                                                     │   │
│  │  ┌──────────────────────────────────────────────────────────┐      │   │
│  │  │ 🖥️ EduSearch - 发现优质教育培训课程                     │      │   │
│  │  │    数学辅导 | 音乐培训 | 艺术课程 | 语言学习              │      │   │
│  │  └──────────────────────────────────────────────────────────┘      │   │
│  │                                                                     │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │  🔍 搜索栏                                                          │   │
│  │  ─────────────────────────────────────────────────────────────     │   │
│  │  [搜索课程、教师、机构...]                                         │   │
│  │                                                                     │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 🏆 搜索结果顶部广告 (468x60)                                       │   │
│  │                                                                     │   │
│  │  ┌──────────────────────────────────────────────────────────┐      │   │
│  │  │ 🎯 ABC数学培训 - 专业NCEA辅导，限时9折                   │      │   │
│  │  └──────────────────────────────────────────────────────────┘      │   │
│  │                                                                     │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │  搜索结果列表                                                       │   │
│  │  ─────────────────────────────────────────────────────────────     │   │
│  │                                                                     │   │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                  │   │
│  │  │  课程卡片   │ │  课程卡片   │ │  课程卡片   │                  │   │
│  │  └─────────────┘ └─────────────┘ └─────────────┘                  │   │
│  │                                                                     │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 🖼️ 侧边栏矩形广告 (300x250)                                        │   │
│  │                                                                     │   │
│  │  ┌───────────────────────┐                                         │   │
│  │  │                       │                                         │   │
│  │  │   🎨 艺术培训广告    │                                         │   │
│  │  │                       │                                         │   │
│  │  │   限时体验课$29      │                                         │   │
│  │  │                       │                                         │   │
│  │  └───────────────────────┘                                         │   │
│  │                                                                     │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 📱 底部通栏广告 (320x50)                                           │   │
│  │  ┌──────────────────────────────────────────────────────────┐      │   │
│  │  │ 📢 发现更多优质课程 - 点击查看                            │      │   │
│  │  └──────────────────────────────────────────────────────────┘      │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.3 广告位详情

| 广告位 | 尺寸 | 位置 | 展示条件 | 预估CTR |
|--------|------|------|----------|---------|
| **顶部通栏** | 728x90 | 所有页面顶部 | 始终展示 | 0.5% |
| **搜索顶部** | 468x60 | 搜索结果页 | 有搜索结果时 | 2.0% |
| **列表穿插** | 300x250 | 课程列表 | 每3个课程穿插1个 | 1.5% |
| **侧边栏** | 300x250 | 内容页侧边 | 始终展示 | 0.8% |
| **底部通栏** | 320x50 | 所有页面底部 | 始终展示 | 0.3% |
| **原生广告** | 自适应 | 课程详情页 | 相关内容匹配 | 3.0% |

---

## 三、Google Ads配置

### 3.1 Google AdSense配置

```html
<!-- 全站通用Head代码 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXX"
     crossorigin="anonymous"></script>

<!-- 响应式广告单元 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-XXXXX"
     data-ad-slot="XXXXX"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
```

### 3.2 广告位配置

```typescript
// 广告位配置
const adSlots = {
  // 顶部通栏
  topBanner: {
    slotId: 'ca-pub-XXXXX/slot_top_banner',
    size: [[728, 90], [970, 90], [970, 250]],
    format: 'fluid',
    responsive: true
  },
  
  // 搜索顶部
  searchTop: {
    slotId: 'ca-pub-XXXXX/slot_search_top',
    size: [468, 60],
    format: 'fluid'
  },
  
  // 侧边栏
  sidebar: {
    slotId: 'ca-pub-XXXXX/slot_sidebar',
    size: [[300, 250], [300, 600]],
    format: 'fluid'
  },
  
  // 底部通栏
  bottomBanner: {
    slotId: 'ca-pub-XXXXX/slot_bottom_banner',
    size: [320, 50],
    format: 'fluid'
  },
  
  // 原生广告
  native: {
    slotId: 'ca-pub-XXXXX/slot_native',
    size: 'fluid',
    format: 'autorelaxed'
  }
};
```

### 3.3 广告加载策略

```typescript
class AdManager {
  // 广告加载状态
  private adStates: Map<string, 'loading' | 'loaded' | 'failed'> = new Map();
  
  // 加载广告
  async loadAd(slotId: string): Promise<void> {
    try {
      this.adStates.set(slotId, 'loading');
      
      // 检查是否需要展示广告
      if (!this.shouldShowAd(slotId)) {
        this.adStates.set(slotId, 'loaded');
        return;
      }
      
      // 动态加载广告
      await this.renderAd(slotId);
      
      this.adStates.set(slotId, 'loaded');
    } catch (error) {
      console.error(`Ad load failed: ${slotId}`, error);
      this.adStates.set(slotId, 'failed');
    }
  }
  
  // 检查是否应该展示广告
  private shouldShowAd(slotId: string): boolean {
    // 用户已登录且是机构用户，不展示广告
    if (this.isLoggedIn && this.user.isInstitution) {
      return false;
    }
    
    // 检查广告展示频率
    const lastAdTime = this.getLastAdTime(slotId);
    const adInterval = 5 * 60 * 1000; // 5分钟间隔
    
    if (Date.now() - lastAdTime < adInterval) {
      return false;
    }
    
    return true;
  }
  
  // 记录广告展示时间
  private recordAd Impression(slotId: string): void {
    localStorage.setItem(`last_ad_${slotId}`, Date.now().toString());
  }
}
```

---

## 四、广告展示规则

### 4.1 展示条件

| 条件 | 说明 | 优先级 |
|------|------|--------|
| **用户类型** | 个人用户展示，机构用户不展示 | P0 |
| **展示频率** | 同一广告位每5分钟最多展示1次 | P0 |
| **页面类型** | 仅在搜索结果页、列表页展示 | P1 |
| **用户行为** | 首次访问展示频率更高 | P2 |

### 4.2 广告过滤

```typescript
// 广告过滤配置
const adFilters = {
  // 排除的类别
  excludedCategories: [
    'adult',
    'gambling',
    'alcohol',
    'tobacco'
  ],
  
  // 关键词过滤
  excludedKeywords: [
    'adult content',
    'online casino',
    'lottery'
  ],
  
  // 敏感内容过滤
  sensitiveContentFilter: true,
  
  // 年龄限制
  ageRestricted: false
};

// 检查广告是否应该展示
function shouldDisplayAd(ad: Ad, context: Context): boolean {
  // 检查类别
  if (excludedCategories.includes(ad.category)) {
    return false;
  }
  
  // 检查关键词
  for (const keyword of excludedKeywords) {
    if (ad.title.includes(keyword) || ad.description.includes(keyword)) {
      return false;
    }
  }
  
  // 检查年龄限制
  if (ad.ageRestricted && !context.isAgeVerified) {
    return false;
  }
  
  return true;
}
```

### 4.3 用户体验优化

```typescript
// 用户体验优化策略
const uxOptimization = {
  // 广告加载延迟（毫秒）
  loadDelay: {
    topBanner: 1000,
    searchTop: 500,
    sidebar: 2000,
    bottomBanner: 3000
  },
  
  // 最大广告数量
  maxAdsPerPage: 4,
  
  // 广告与内容比例（不超过30%）
  adContentRatio: 0.3,
  
  // 广告可见性检测
  viewabilityThreshold: 0.5,  // 50%可见才算展示
  viewabilityTime: 1000  // 1秒
};
```

---

## 五、广告数据统计

### 5.1 统计指标

| 指标 | 说明 | 采集方式 |
|------|------|----------|
| **展示次数** | 广告被加载的次数 | 自动采集 |
| **点击次数** | 广告被点击的次数 | 自动采集 |
| **点击率(CTR)** | 点击次数/展示次数 | 计算得出 |
| **展示人数** | 看到广告的唯一用户数 | 自动采集 |
| **点击人数** | 点击广告的唯一用户数 | 自动采集 |
| **收入** | 广告收入金额 | Google Ads后台 |
| **eCPM** | 每千次展示收入 | 计算得出 |

### 5.2 数据采集

```typescript
// 广告数据采集
class AdAnalytics {
  // 记录展示
  async recordImpression(adSlot: string, adData: AdData): Promise<void> {
    await analytics.track('ad_impression', {
      adSlot,
      adId: adData.id,
      adCategory: adData.category,
      timestamp: Date.now(),
      pageUrl: window.location.href,
      userId: this.getUserId()
    });
  }
  
  // 记录点击
  async recordClick(adSlot: string, adData: AdData): Promise<void> {
    await analytics.track('ad_click', {
      adSlot,
      adId: adData.id,
      adCategory: adData.category,
      timestamp: Date.now(),
      pageUrl: window.location.href,
      userId: this.getUserId()
    });
  }
  
  // 记录收入
  async recordRevenue(adSlot: string, revenue: number): Promise<void> {
    await analytics.track('ad_revenue', {
      adSlot,
      revenue,
      currency: 'NZD',
      timestamp: Date.now()
    });
  }
}
```

### 5.3 数据看板

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         广告数据统计看板                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 📊 本月广告数据                                                      │   │
│  │                                                                     │   │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐   │   │
│  │  │ 展示次数    │ │  点击次数   │ │   收入      │ │   CTR       │   │   │
│  │  │   45,230   │ │     892     │ │   $680      │ │   1.97%     │   │   │
│  │  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘   │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 📈 趋势图                                                            │   │
│  │                                                                     │   │
│  │     │                                                    ┌───       │   │
│  │     │                                              ┌─── │收入      │   │
│  │     │                                        ┌─── │     └───       │   │
│  │     │                                  ┌─── │     │                │   │
│  │     │                            ┌─── │     │     │                │   │
│  │     │                      ┌─── │     │     │     │                │   │
│  │     │                ┌─── │     │     │     │     │                │   │
│  │     │          ┌─── │     │     │     │     │     │                │   │
│  │     │    ┌─── │     │     │     │     │     │     │                │   │
│  │     │    │     │     │     │     │     │     │     │                │   │
│  │     └────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘                │   │
│  │       Week1  Week2  Week3  Week4  Week5  Week6                      │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 📊 广告位数据                                                        │   │
│  │                                                                     │   │
│  │  广告位       |  展示次数  |  点击次数  |  收入   |  CTR           │   │
│  │  ────────────────────────────────────────────────────────────────  │   │
│  │  顶部通栏    |   12,500   |     156   |  $210   |   1.25%        │   │
│  │  搜索顶部    |    8,200   |     245   |  $185   |   2.99%        │   │
│  │  侧边栏      |   15,800   |     316   |  $195   |   2.00%        │   │
│  │  底部通栏    |    8,730   |     175   |   $90   |   2.00%        │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 六、收入预测

### 6.1 月度收入预测

| 月份 | 预计DAU | 月PV | 广告展示次数 | 点击次数 | 月收入 |
|------|---------|------|--------------|----------|--------|
| Month 1 | 50 | 5,000 | 15,000 | 300 | $150 |
| Month 3 | 200 | 20,000 | 60,000 | 1,200 | $600 |
| Month 6 | 500 | 50,000 | 150,000 | 3,000 | $1,800 |
| Month 12 | 1,000 | 100,000 | 300,000 | 6,000 | $4,200 |

### 6.2 eCPM参考

| 广告类型 | 低端 | 中端 | 高端 |
|----------|------|------|------|
| **搜索广告** | $0.50 | $1.00 | $2.00 |
| **展示广告** | $0.50 | $1.00 | $1.50 |
| **原生广告** | $1.00 | $2.00 | $3.00 |
| **平均eCPM** | $0.67 | $1.33 | $2.17 |

### 6.3 收入构成

| 来源 | 占比 | 说明 |
|------|------|------|
| 搜索广告 | 35% | 搜索结果页顶部 |
| 展示广告 | 40% | 侧边栏、底部 |
| 原生广告 | 15% | 课程详情页穿插 |
| 其他 | 10% | 备用广告位 |

---

## 七、实现计划

### 7.1 开发任务分解

| 任务 | 描述 | 预估工时 | 依赖 |
|------|------|----------|------|
| AdSense账号申请 | 申请Google AdSense | 2h | - |
| 广告位HTML模板 | 创建广告位组件 | 4h | - |
| 广告加载逻辑 | 实现动态加载 | 8h | - |
| 广告过滤规则 | 实现过滤逻辑 | 4h | - |
| 数据采集 | 实现统计采集 | 6h | - |
| 数据看板 | 实现统计展示 | 8h | - |
| 单元测试 | 广告功能测试 | 4h | 全部 |

### 7.2 验收标准

- [ ] AdSense账号审核通过
- [ ] 广告位正确展示
- [ ] 广告加载不影响页面性能
- [ ] 机构用户不展示广告
- [ ] 数据采集准确
- [ ] 统计看板完整

---

## 八、收益优化

### 8.1 优化策略

| 策略 | 实施方法 | 预期效果 |
|------|----------|----------|
| **A/B测试** | 测试不同广告位布局 | CTR提升10-20% |
| **广告位优化** | 调整位置和尺寸 | 展示率提升15% |
| **内容匹配** | 提高广告相关性 | CTR提升20% |
| **加载优化** | 懒加载广告 | 页面速度提升 |
| **时段优化** | 高峰时段展示更多广告 | 收入提升10% |

### 8.2 性能影响

| 指标 | 优化前 | 优化后 | 说明 |
|------|--------|--------|------|
| **页面加载时间** | 2.0s | 2.2s | 增加广告加载时间 |
| **FCP** | 1.0s | 1.2s | 首屏渲染延迟 |
| **LCP** | 1.5s | 1.7s | 最大内容渲染延迟 |
| **CLS** | 0 | 0.05 | 布局偏移 |

---

## 九、合规要求

### 9.1 广告合规

| 要求 | 说明 |
|------|------|
| **广告标识** | 明确标识"广告"或"赞助" |
| **禁止内容** | 成人、赌博、酒精等禁止类别 |
| **真实性** | 广告内容真实可信 |
| **隐私保护** | 不使用Cookie追踪 |

### 9.2 用户体验

| 要求 | 说明 |
|------|------|
| **广告比例** | 广告面积不超过页面30% |
| **干扰控制** | 避免弹窗、闪烁 |
| **关闭选项** | 提供广告反馈选项 |
| **加载速度** | 广告不影响主要内容加载 |

---

## 十、风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| AdSense审核不通过 | 低 | 高 | 提前准备，确保网站合规 |
| 广告填充率低 | 中 | 中 | 优化广告位，申请更多广告单元 |
| 点击率过低 | 中 | 中 | 优化广告位置和内容匹配 |
| 用户投诉广告 | 低 | 中 | 提供反馈渠道，及时响应 |
| 收入不稳定 | 高 | 中 | 发展多元化收入来源 |

---

**文档路径**: `/Users/dianwenwang/Project/idea/05-product-design/feature-google-ads.md`

**相关文档**:
- [功能概览](feature-overview.md)
- [机构入驻](feature-institution-onboarding.md)
- [管理员后台](feature-admin-backend.md)
