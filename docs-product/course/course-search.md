---
title: Course Search and Filtering
category: product-design
created: 2026-01-21
author: steve-jobs
version: 1.0
phase: 1
priority: P0
status: pending-development
---

# Feature: Course Search and Filtering - 课程搜索与筛选

> **功能模块**: 搜索与发现 | **优先级**: P0 | **排期**: Phase 1 | **状态**: 待开发

---

## 一、功能概述

### 1.1 功能描述

课程搜索与筛选是平台的核心功能，为用户提供快速、准确的课程发现能力。搜索系统支持多维度筛选、关键词匹配，并基于**数据来源优先级**和**信任标识**进行智能排序。

### 1.2 核心价值

- **高效发现**: 多维度筛选，快速定位目标课程
- **智能排序**: 基于数据质量、来源可信度的智能排序
- **差异化展示**: 注册用户数据优先展示（1.5x权重）
- **多语言支持**: 支持中英文搜索和筛选

### 1.3 用户故事

```
作为 家长
我希望 搜索"数学辅导"并筛选"奥克兰""高中"
以便 找到适合我家孩子的数学课程

作为 成人学习者
我希望 按价格区间和评分筛选
以便 找到性价比高的钢琴课程

作为 家长
我希望 收藏感兴趣的课程并对比
以便 在多个课程中选择最合适的
```

---

## 二、功能详细设计

### 2.1 搜索入口设计

#### 2.1.1 首页搜索入口

```
┌─────────────────────────────────────────────────────────────────────┐
│  EduSearch NZ - 新西兰课程搜索平台                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  🔍  搜索课程、教师、机构                                    │   │
│  │  ────────────────────────────────────────────────────────  │   │
│  │  [ 数学辅导                     ][  搜 索  ]                │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📍  地区     📚  科目     🎓  年级     💰  价格     ⭐  评分       │
│                                                                     │
│  ────────────────────────────────────────────────────────          │
│  🔥 热门搜索: 数学辅导 | 钢琴 | 游泳 | 英语 | 编程                   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 搜索流程

```
用户输入关键词
      │
      ▼
前端实时搜索建议（Debounce 300ms）
      │
      ▼
点击搜索 / 按回车
      │
      ▼
调用搜索API
      │
      ▼
后端处理搜索请求
      │
      ├── 关键词分词
      ├── 条件筛选
      ├── 权重排序
      └── 分页返回
      │
      ▼
展示搜索结果
      │
      ├── 列表展示
      ├── 筛选面板
      └── 排序选项
```

### 2.3 搜索维度

#### 2.3.1 搜索字段

| 字段 | 说明 | 搜索方式 |
|------|------|----------|
| 课程名称 | 课程标题 | 关键词匹配、模糊搜索 |
| 教师名称 | 授课教师 | 关键词匹配 |
| 机构名称 | 培训机构 | 关键词匹配 |
| 科目 | 课程科目 | 精确匹配 |
| 描述 | 课程描述 | 全文检索 |
| 标签 | 课程标签 | 精确匹配 |

#### 2.3.2 筛选维度

| 筛选维度 | 选项类型 | 说明 |
|----------|----------|------|
| **地区** | 多选 | Auckland, Wellington, Christchurch, 等 |
| **科目** | 多选 | 数学、英语、物理、化学、音乐、美术、体育、编程等 |
| **年级** | 多选 | 学前、小学、初中、高中、成人 |
| **价格** | 区间 | 低于$20/h, $20-40/h, $40-60/h, $60+/h |
| **授课方式** | 多选 | 线上、线下、混合 |
| **语言** | 多选 | 中文授课、英文授课、双语 |
| **评分** | 区间 | 4.5分以上、4.0分以上、3.5分以上 |
| **数据来源** | 多选 | 平台认证、Gumtree、Facebook、其他 |
| **上课时间** | 多选 | 周末、平日晚上、平日白天、灵活时间 |

### 2.4 排序规则

#### 2.4.1 搜索排序算法

```
最终分数 = 基础相关性 × 来源权重 × 质量权重 × 新鲜度权重 × 信任权重

说明：
- 基础相关性: 关键词匹配度（TF-IDF）
- 来源权重: 注册用户1.5x, Gumtree 1.0x, Facebook 0.8x
- 质量权重: S级1.3x, A级1.2x, B级1.0x, C级0.8x, D级0.5x
- 新鲜度权重: 7天内1.2x, 30天内1.0x, 90天内0.8x
- 信任权重: 平台认证1.2x, 来源验证1.0x
```

#### 2.4.2 排序选项

| 排序方式 | 说明 | 适用场景 |
|----------|------|----------|
| **综合排序** | 综合评分最高的课程 | 默认选项 |
| **最新发布** | 最近发布的课程 | 寻找新课程 |
| **价格从低到高** | 按课时费升序 | 预算有限 |
| **价格从高到低** | 按课时费降序 | 高端课程 |
| **评分最高** | 用户评价最高的课程 | 口碑优先 |
| **销量最好** | 购买人数最多的课程 | 大众选择 |

---

## 三、搜索结果展示

### 3.1 搜索结果列表

```
┌─────────────────────────────────────────────────────────────────────┐
│  搜索结果: "数学辅导"  (找到 128 个课程)                            │
├─────────────────────────────────────────────────────────────────────┤
│  [综合排序 ▼]  [筛选]                                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 🏆⭐  精英数学工作室 - 高中数学提高班                         │   │
│  │ ─────────────────────────────────────────────────────────  │   │
│  │ 💰 $50/小时  ⭐ 4.9(128)  📍 Auckland CBD                    │   │
│  │ 👨‍🏫 张老师  🏆 平台认证  📚 数学  🎓 高中                      │   │
│  │ 🕐 周末下午  🗣️ 中文授课                                     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 🏆  奥克兰数学补习中心 - GCSE数学冲刺                         │   │
│  │ ─────────────────────────────────────────────────────────  │   │
│  │ 💰 $45/小时  ⭐ 4.8(86)  📍 Epsom                            │   │
│  │ 👨‍🏫 李老师  ✅ 来源验证  📚 数学  🎓 初中/高中                  │   │
│  │ 🕐 平日晚上  🗣️ 中英双语                                     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ✅  数学一对一辅导 (Gumtree)                                 │   │
│  │ ─────────────────────────────────────────────────────────  │   │
│  │ 💰 $40/小时  ⭐ -  📍 North Shore                            │   │
│  │ 👨‍🏫 王老师  📱 社群来源  📚 数学  🎓 初中                      │   │
│  │ 🕐 灵活时间  🗣️ 中文授课                                     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.2 课程卡片字段说明

| 字段 | 图标 | 说明 |
|------|------|------|
| 课程名称 | - | 课程标题，最多显示30字符 |
| 价格 | 💰 | 课时费，单位NZD |
| 评分 | ⭐ | 评分和评价数量 |
| 地区 | 📍 | 上课地点区域 |
| 教师 | 👨‍🏫 | 教师名称或"机构名-教师名" |
| 信任标识 | 🏆/✅/📱 | 平台认证、来源验证、社群来源 |
| 科目 | 📚 | 科目标签 |
| 年级 | 🎓 | 适用年级 |
| 时间 | 🕐 | 上课时间 |
| 语言 | 🗣️ | 授课语言 |

---

## 四、数据模型设计

### 4.1 搜索请求参数

```typescript
interface SearchRequest {
  // 关键词
  keyword?: string;
  
  // 筛选条件
  filters?: {
    regions?: string[];        // 地区
    subjects?: string[];       // 科目
    grades?: string[];         // 年级
    priceMin?: number;         // 最低价格
    priceMax?: number;         // 最高价格
    teachingMode?: string[];   // 授课方式
    language?: string[];       // 授课语言
    minRating?: number;        // 最低评分
    dataSources?: string[];    // 数据来源
    schedule?: string[];       // 上课时间
  };
  
  // 排序
  sortBy?: 'relevance' | 'latest' | 'price_asc' | 'price_desc' | 'rating' | 'popular';
  sortOrder?: 'asc' | 'desc';
  
  // 分页
  page?: number;
  pageSize?: number;
}
```

### 4.2 搜索响应数据

```typescript
interface SearchResponse {
  // 搜索结果
  data: CourseSearchResult[];
  
  // 分页信息
  pagination: {
    page: number;
    pageSize: number;
    total: number;
    totalPages: number;
  };
  
  // 筛选统计
  facets?: {
    regions: FacetItem[];
    subjects: FacetItem[];
    grades: FacetItem[];
    priceRanges: FacetItem[];
    teachingModes: FacetItem[];
    languages: FacetItem[];
  };
}

interface CourseSearchResult {
  id: string;
  title: string;
  description: string;
  price: number;
  priceUnit: 'hour' | 'lesson' | 'month';
  rating: number;
  reviewCount: number;
  region: string;
  subject: string;
  grade: string;
  teachingMode: 'online' | 'offline' | 'hybrid';
  language: 'chinese' | 'english' | 'bilingual';
  schedule: string;
  teacherName: string;
  trustLevel: 'S' | 'A' | 'B' | 'C' | 'D';
  dataSource: 'first_party' | 'gumtree' | 'facebook' | 'other';
  sourceWeight: number;
  publishedAt: string;
  // 脱敏后的联系方式
  contact?: {
    phone?: string;
    wechat?: string;
    email?: string;
  };
}
```

---

## 五、API 设计

### 5.1 API 列表

| 方法 | 路径 | 功能 | 说明 |
|------|------|------|------|
| GET | /api/v1/courses/search | 搜索课程 | 支持关键词和筛选 |
| GET | /api/v1/courses/suggest | 搜索建议 | 实时搜索建议 |
| GET | /api/v1/courses/popular | 热门搜索 | 返回热门关键词 |
| GET | /api/v1/courses/filters | 获取筛选选项 | 返回所有筛选选项 |

### 5.2 API 详细设计

#### 5.2.1 GET /api/v1/courses/search

**请求示例**:
```
GET /api/v1/courses/search?keyword=数学&regions=Auckland&subjects=数学&priceMin=30&priceMax=60&sortBy=rating&page=1&pageSize=20
```

**请求参数**:

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| keyword | string | 否 | 搜索关键词 |
| regions | string[] | 否 | 地区筛选 |
| subjects | string[] | 否 | 科目筛选 |
| grades | string[] | 否 | 年级筛选 |
| priceMin | number | 否 | 最低价格 |
| priceMax | number | 否 | 最高价格 |
| teachingMode | string[] | 否 | 授课方式 |
| language | string[] | 否 | 授课语言 |
| minRating | number | 否 | 最低评分 |
| dataSources | string[] | 否 | 数据来源 |
| schedule | string[] | 否 | 上课时间 |
| sortBy | string | 否 | 排序方式 |
| sortOrder | string | 否 | 排序方向 |
| page | number | 否 | 页码，默认1 |
| pageSize | number | 否 | 每页数量，默认20 |

**响应示例** (200):

```json
{
  "success": true,
  "data": [
    {
      "id": "course-001",
      "title": "高中数学提高班",
      "description": "针对高中数学难点进行针对性辅导...",
      "price": 50,
      "priceUnit": "hour",
      "rating": 4.9,
      "reviewCount": 128,
      "region": "Auckland CBD",
      "subject": "数学",
      "grade": "高中",
      "teachingMode": "offline",
      "language": "chinese",
      "schedule": "周末下午",
      "teacherName": "张老师",
      "trustLevel": "S",
      "dataSource": "first_party",
      "sourceWeight": 1.5,
      "publishedAt": "2026-01-15T10:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "pageSize": 20,
    "total": 128,
    "totalPages": 7
  },
  "facets": {
    "regions": [
      {"value": "Auckland", "count": 85},
      {"value": "Wellington", "count": 30},
      {"value": "Christchurch", "count": 13}
    ],
    "subjects": [
      {"value": "数学", "count": 45},
      {"value": "英语", "count": 38},
      {"value": "物理", "count": 25}
    ],
    "priceRanges": [
      {"value": "0-30", "count": 20},
      {"value": "30-50", "count": 55},
      {"value": "50+", "count": 53}
    ]
  }
}
```

---

## 六、前端设计

### 6.1 搜索页面布局

```
┌─────────────────────────────────────────────────────────────────────┐
│  🔍 数学辅导  [Q]                                               [登录] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────┐ ┌───────────────────────┐ │
│  │  筛选面板                          │ │  搜索结果             │ │
│  │                                    │ │                       │ │
│  │  📍 地区                          │ │  [综合排序 ▼]        │ │
│  │  ☐ Auckland (85)                  │ │                       │ │
│  │  ☐ Wellington (30)                │ │  找到 128 个课程      │ │
│  │  ☐ Christchurch (13)              │ │                       │ │
│  │                                    │ │  ┌─────────────────┐ │ │
│  │  📚 科目                          │ │  │ 课程卡片...     │ │ │
│  │  ☐ 数学 (45)                      │ │  └─────────────────┘ │ │
│  │  ☐ 英语 (38)                      │ │  ┌─────────────────┐ │ │
│  │  ☐ 物理 (25)                      │ │  │ 课程卡片...     │ │ │
│  │                                    │ │  └─────────────────┘ │ │
│  │  💰 价格                          │ │  ┌─────────────────┐ │ │
│  │  [$___ - $___]                   │ │  │ 课程卡片...     │ │ │
│  │                                    │ │  └─────────────────┘ │ │
│  │  🎓 年级                          │ │                       │ │
│  │  ☐ 高中 (45)                      │ │  ┌─────────────────┐ │ │
│  │  ☐ 初中 (38)                      │ │  │ 课程卡片...     │ │ │
│  │                                    │ │  └─────────────────┘ │ │
│  │  ⭐ 评分                          │ │                       │ │
│  │  ☐ 4.5分以上                      │ │  ─────────────────   │ │
│  │  ☐ 4.0分以上                      │ │  [1] [2] [3] ... [7] │ │
│  │                                    │ │                       │ │
│  │  🗣️ 语言                          │ └───────────────────────┘ │
│  │  ☐ 中文授课                       │                         │
│  │  ☐ 英文授课                       │                         │
│  │                                    │                         │
│  │  [重置所有筛选]                   │                         │
│  └─────────────────────────────────────┘                         │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 6.2 筛选交互设计

| 交互 | 说明 |
|------|------|
| 单选 | 点击选项直接应用筛选 |
| 多选 | 点击复选框，实时更新结果 |
| 范围选择 | 拖动滑块或输入数值 |
| 实时筛选 | 筛选条件变更后自动更新结果 |
| 重置 | 一键清除所有筛选条件 |
| 保存筛选 | 登录用户可保存常用筛选 |

### 6.3 响应式设计

| 屏幕宽度 | 布局 |
|----------|------|
| < 768px | 筛选按钮+弹窗，列表全宽 |
| 768-1024px | 侧边栏可收起，列表自适应 |
| > 1024px | 固定侧边栏，双栏布局 |

---

## 七、国际化支持

### 7.1 中文文案

| 场景 | 中文文案 |
|------|----------|
| 搜索框占位 | 搜索课程、教师、机构 |
| 搜索按钮 | 搜索 |
| 搜索结果 | 找到 {count} 个课程 |
| 筛选 | 筛选 |
| 综合排序 | 综合排序 |
| 最新发布 | 最新发布 |
| 价格从低到高 | 价格从低到高 |
| 价格从高到低 | 价格从高到低 |
| 评分最高 | 评分最高 |
| 重置筛选 | 重置筛选 |
| 暂无结果 | 未找到相关课程 |

### 7.2 英文文案

| 场景 | 英文文案 |
|------|----------|
| 搜索框占位 | Search courses, tutors, institutes |
| 搜索按钮 | Search |
| 搜索结果 | {count} courses found |
| 筛选 | Filter |
| 综合排序 | Relevance |
| 最新发布 | Newest |
| 价格从低到高 | Price: Low to High |
| 价格从高到低 | Price: High to Low |
| 评分最高 | Highest Rated |
| 重置筛选 | Reset Filters |
| 暂无结果 | No courses found |

---

## 八、测试用例

### 8.1 功能测试用例

| 测试场景 | 操作步骤 | 预期结果 |
|----------|----------|----------|
| 关键词搜索 | 输入"数学"→搜索 | 返回包含"数学"的课程 |
| 多条件筛选 | 选择地区"Auckland"和科目"数学" | 返回符合条件的结果 |
| 价格区间 | 设置价格$30-50 | 返回价格在该区间的课程 |
| 评分筛选 | 选择"4.5分以上" | 返回评分4.5以上的课程 |
| 排序切换 | 选择"价格从低到高" | 结果按价格升序排列 |
| 分页 | 进入第2页 | 返回第2页结果 |
| 无结果 | 搜索不存在的关键词 | 显示"暂无结果" |

### 8.2 性能测试用例

| 测试场景 | 预期指标 |
|----------|----------|
| 搜索响应时间 | < 500ms |
| 筛选响应时间 | < 300ms |
| 分页加载时间 | < 200ms |
| 1000并发搜索 | 成功率>99% |

---

## 九、实现计划

### 9.1 开发任务分解

| 任务 | 描述 | 预估工时 | 依赖 |
|------|------|----------|------|
| 搜索后端 | 实现搜索API、分词、筛选 | 12h | 数据库设计 |
| 排序算法 | 实现权重排序算法 | 4h | 搜索后端 |
| 筛选后端 | 实现多维度筛选 | 8h | 搜索后端 |
| 搜索前端 | 实现搜索框、结果列表 | 8h | UI设计 |
| 筛选前端 | 实现筛选面板 | 8h | 搜索前端 |
| 排序前端 | 实现排序切换 | 4h | 搜索前端 |
| 实时建议 | 实现搜索建议功能 | 4h | 搜索前端 |
| 单元测试 | 搜索功能测试 | 8h | 后端API |

### 9.2 验收标准

- [ ] 关键词搜索正常，分词准确
- [ ] 多条件筛选功能正常
- [ ] 排序功能正确
- [ ] 注册用户课程优先展示
- [ ] 响应时间<500ms
- [ ] 中英文切换正常
- [ ] 移动端适配正常
- [ ] 单元测试覆盖率80%+

---

## 十、风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| 搜索性能问题 | 中 | 高 | Elasticsearch，缓存 |
| 中文分词不准确 | 低 | 中 | 使用专业中文分词库 |
| 排序效果不佳 | 中 | 中 | A/B测试，持续优化 |
| 筛选条件过多 | 低 | 低 | 默认折叠高级筛选 |

---

**文档路径**: `/Users/dianwenwang/Project/idea/05-product-design/feature-search.md`

**相关文档**:
- [功能概览](feature-overview.md)
- [课程详情页](feature-course-detail.md)
- [信任标识系统](feature-trust-badges.md)
- [数据聚合](feature-data-aggregation.md)
